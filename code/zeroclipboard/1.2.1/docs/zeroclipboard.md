# api文档## 初始化参数说明|名称|默认值|备注||----|----|----||moviePath|"ZeroClipboard.swf"|Flash 文件路径||trustedOrigins|null|可信任的域（字符串或者字符串数组）||hoverClass|"zeroclipboard-is-hover"| Hover 时给元素增加的 Class||activeClass|"zeroclipboard-is-active"|Active 时给元素增加的 Class||allowScriptAccess|"sameDomain"|SWF 外部脚本策略||useNoCache|true|是否不缓存 SWF 文件请求||forceHandCursor|false|是否强制设置光标样式为 "pointer"|### 参数 trustedOrigins 选项的注意事项当 SWF 文件和你的调用的域不在同一个域时，需要设置你调用 JS 脚本的域为信任域，如下```jsZeroClipboard.setDefaults({  trustedOrigins: [window.location.protocol + "//" + window.location.host]});```### 参数 allowScriptAccess 选项的注意事项1.1.7 及以下的版本，`allowScriptAccess` 的默认值为 `always`。意味着允许 "ZeroClipboard.swf" 文件托管的其他的域。为了提高安全性，1.1.7 之后的版本，`allowScriptAccess` 的默认值为 `sameDomain`，只允许 "ZeroClipboard.swf" 在相同域之下。如果你是从 1.1.7 或更低的版本升级到 1.1.7 以上版本时，需要将 "ZeroClipboard.swf" 保存一份到相同域之下，或者设置 `allowScriptAccess` 的值为 `always`。关于 `allowScriptAccess` 的更多信息，可以参考 *[Adobe 官方文档](http://helpx.adobe.com/flash/kb/control-access-scripts-host-web.html)*。### 跨域的相关设置如果是跨域环境使用 "ZeroClipboard.swf"，在配置的时候不仅要设置 `allowScriptAccess` 的值为 `always`，并且要加上参数 trustedDomains: ['host','*']，如下：```ZeroClipboard.setDefaults {    moviePath: "http://otherhost.net/flash/ZeroClipboard.swf",    trustedDomains: ['localhost', '*'],    allowScriptAccess: "always", }```## DOM 节点的属性|名称|备注||----|----||data-clipboard-target|元素ID。查找该元素后，尝试复制元素的 .value 或 .textContent 或 .innerText 的值||data-clipboard-text|默认复制的内容|同时设置 `data-clipboard-target` 和 `data-clipboard-text` 两个属性时，只有在找不到 `clipboard-target` 的值时才会选用 `clipboard-text`，即使获取到 `clipboard-target` 的值为空，也不会选用 `clipboard-text`。## API 方法### *glue(dom)*	绑定到元素```jsvar clip = new ZeroClipboard();clip.glue( document.getElementById('d_clip_button') );```### *setText(string)* 设置复制的内容调用 `clip.setText` 来设置相应的文本，并添加到 `dataRequested` 事件处理程序中，相应的文本将被复制到剪贴板里```jsclip.on( 'dataRequested', function (client, args) {    client.setText( "Copy me!" );});```### *on('Event', my_load_handler)* 绑定事件### *on('Event', my_load_handler)* 取消绑定事件## 事件通过 API 方法的 `on()` 来绑定，`off()` 来取消绑定，参数 args 默认有以下几个参数：flashVersion：当前 Flash 的版本号altKey：是否按住 Alt 键ctrlKey：是否按住 Ctrl 键shiftKey：是否按住 Shift 键。|名称|示例|备注||----|----|----||load|clip.on("load",function(client,args){...});|Flash 加载完成时的事件。args 无 `altKey`，`ctrlKey`，`shiftKey` 三个属性||mouseover|clip.on("mouseover",function(client,args){...});|鼠标移入时的事件||mouseout|clip.on("mouseout",function(client,args){...});|鼠标移出时的事件||mousedown|clip.on("mousedown",function(client,args){...});|鼠标按下时的事件||mouseup|clip.on("mouseup",function(client,args){...});|鼠标弹起时的事件||complete|clip.on("complete",function(client,args){...});|成功复制内容时的事件，`args` 还包含 `text` （复制的内容）属性||noflash|clip.on("noflash",function(client,args){...});|没有检测到 Flash 时的事件||wrongflash|clip.on("wrongflash",function(client,args){...});|Flash 版本低于要求版本时的事件，Zero Clipboard 要求 Flash 10.0.0 以上的版本||dataRequested|clip.on("dataRequested",function(client,args){...});|复制开始时的事件|## 一份完整示例```html  <html>  <head>    <style type="text/css">      #d_clip_button {        text-align: center;        border: 1px solid black;        background-color: #ccc;        margin: 10px;        padding: 10px;      }      #d_clip_button.zeroclipboard-is-hover { background-color: #eee; }      #d_clip_button.zeroclipboard-is-active { background-color: #aaa; }    </style>  </head>  <body>    <script type="text/javascript" src="ZeroClipboard.js"></script>    <div id="d_clip_button" data-clipboard-text="Copy Me!">Copy To Clipboard</div>    <script type="text/javascript">      var clip = new ZeroClipboard( $('#d_clip_button') );      clip.on( 'load', function(client) {        // alert( "movie is loaded" );      } );      clip.on( 'complete', function(client, args) {        alert("Copied text to clipboard: " + args.text );      } );      clip.on( 'mouseover', function(client) {        // alert("mouse over");      } );      clip.on( 'mouseout', function(client) {        // alert("mouse out");      } );      clip.on( 'mousedown', function(client) {        // alert("mouse down");      } );      clip.on( 'mouseup', function(client) {        // alert("mouse up");      } );    </script>  </body>  </html>```